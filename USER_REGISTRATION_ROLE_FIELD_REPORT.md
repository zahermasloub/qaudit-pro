# ุชูุฑูุฑ ุฅุถุงูุฉ ุญูู ุงูุตูุงุญูุฉ ูู ุตูุญุฉ ุงูุชุณุฌูู

**ุงูุชุงุฑูุฎ:** 21 ุฃูุชูุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ููุชูู

---

## ๐ ุงูููุฎุต

ุชู ุฅุถุงูุฉ ุญูู ุงุฎุชูุงุฑ ุงูุตูุงุญูุฉ (Role) ูู ุตูุญุฉ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏุ ููุง ูุณูุญ ูููุณุชุฎุฏููู ุงูุฌุฏุฏ ุจุงุฎุชูุงุฑ ููุน ุญุณุงุจูู:

- **ูุฏูุฑ (Admin)**: ุตูุงุญูุงุช ูุงููุฉ ูููุตูู ุฅูู ููุญุฉ ุงูุชุญูู ูุฌููุน ุงูููุฒุงุช
- **ูุณุชุฎุฏู (User)**: ุตูุงุญูุงุช ูุญุฏูุฏุฉ ูููุตูู ุฅูู ุงูููุฒุงุช ุงูุฃุณุงุณูุฉ ููุท

---

## โ ุงูุชุบููุฑุงุช ุงููููุฐุฉ

### 1. ุตูุญุฉ ุงูุชุณุฌูู (`app/(app)/auth/register/page.tsx`)

#### ุฅุถุงูุฉ ุญูู Role ูู ุงูู State:

```typescript
const [formData, setFormData] = useState({
  name: '',
  email: '',
  password: '',
  confirmPassword: '',
  role: 'User', // Default role
});
```

#### ุฅุถุงูุฉ Dropdown ููุตูุงุญูุงุช:

```tsx
<select
  id="role"
  name="role"
  value={formData.role}
  onChange={e => {
    setFormData(prev => ({ ...prev, role: e.target.value }));
    if (errors.role) {
      setErrors(prev => ({ ...prev, role: undefined }));
    }
  }}
  className="w-full text-right text-base px-4 py-2 rounded-lg border..."
  required
>
  <option value="">ุงุฎุชุฑ ููุน ุงูุญุณุงุจ</option>
  <option value="Admin">ูุฏูุฑ - ุตูุงุญูุงุช ูุงููุฉ (Admin)</option>
  <option value="User">ูุณุชุฎุฏู - ุตูุงุญูุงุช ูุญุฏูุฏุฉ (User)</option>
</select>
```

#### ุฑุณุงูุฉ ุชูุถูุญูุฉ ุฏููุงููููุฉ:

- ุนูุฏ ุงุฎุชูุงุฑ **Admin**: "โ ุงููุฏูุฑ ูุฏูู ุตูุงุญูุงุช ูุงููุฉ ูููุตูู ุฅูู ููุญุฉ ุงูุฅุฏุงุฑุฉ ูุฌููุน ุงูููุฒุงุช"
- ุนูุฏ ุงุฎุชูุงุฑ **User**: "โ ุงููุณุชุฎุฏู ูุฏูู ุตูุงุญูุงุช ูุญุฏูุฏุฉ ูููุตูู ุฅูู ุงูููุฒุงุช ุงูุฃุณุงุณูุฉ ููุท"

---

### 2. ูููู ุฅูุดุงุก ุงููุณุชุฎุฏู ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ

ุชู ุฅูุดุงุก `components/admin/CreateUserDialog.tsx` ูุน ุฏุนู ูุงูู ูุฌููุน ุงูุญููู:

- โ ุงูุงุณู (Name)
- โ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (Email)
- โ ูููุฉ ุงููุฑูุฑ (Password)
- โ **ุงูุฏูุฑ ุงูุฃุณุงุณู (Role)** - ุฌุฏูุฏ
- โ ุงููุบุฉ ุงูููุถูุฉ (Locale)

---

### 3. ุชุญุฏูุซ Schema (`features/admin/users/user.schema.ts`)

```typescript
export const userCreateSchema = z.object({
  name: z.string().min(2, { message: 'ุงูุงุณู ูุฌุจ ุฃู ูููู ุญุฑููู ุนูู ุงูุฃูู' }),
  email: z.string().email({ message: 'ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ุตุญูุญ' }),
  password: z.string().min(8, { message: 'ูููุฉ ุงููุฑูุฑ ูุฌุจ ุฃู ุชููู 8 ุฃุญุฑู ุนูู ุงูุฃูู' }),
  role: z
    .enum(['Admin', 'IA_Lead', 'IA_Auditor', 'User'], {
      errorMap: () => ({ message: 'ูุฌุจ ุงุฎุชูุงุฑ ุฏูุฑ ุตุญูุญ' }),
    })
    .default('IA_Auditor'),
  locale: z.enum(['ar', 'en']).default('ar'),
  roleIds: z.array(z.string()).default([]),
});
```

---

### 4. ุชุญุฏูุซ API (`app/api/admin/users/route.ts`)

```typescript
const user = await prisma.user.create({
  data: {
    name: v.name,
    email: v.email,
    password: hash,
    role: v.role, // โ ุชู ุฅุถุงูุฉ ุญูุธ ุงูุฏูุฑ
    locale: v.locale,
  },
});
```

---

## ๐ฏ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. **ุงุฎุชูุงุฑ ุงูุตูุงุญูุฉ ุฃุซูุงุก ุงูุชุณุฌูู**

- ุญูู Dropdown ูุงุถุญ ููุฑุชุจ
- ุฎูุงุฑุงุช ูุญุฏุฏุฉ: Admin ุฃู User
- ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ: User (ููุฃูุงู)

### 2. **ุฑุณุงุฆู ุชูุถูุญูุฉ**

- ุดุฑุญ ูุงุถุญ ููู ุตูุงุญูุฉ
- ุชุญุฏูุซ ุฏููุงูููู ุนูุฏ ุชุบููุฑ ุงูุงุฎุชูุงุฑ
- ุฃููููุฉ โ ููุชุฃููุฏ

### 3. **ุงูุชุญูู ูู ุงูุตุญุฉ**

- ุญูู ุฅูุฒุงูู (Required)
- ุฑุณุงูุฉ ุฎุทุฃ ุฅุฐุง ูู ูุชู ุงูุงุฎุชูุงุฑ
- ุชุญุฐูุฑุงุช ุจุตุฑูุฉ (ุญุฏูุฏ ุญูุฑุงุก)

### 4. **ุงูุฃูุงู**

- ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ: User (ุตูุงุญูุงุช ูุญุฏูุฏุฉ)
- ุงูุชุญูู ูู ุงูุตุญุฉ ูู Backend
- ุชุดููุฑ ูููุฉ ุงููุฑูุฑ

---

## ๐ ุงูุตูุงุญูุงุช

### Admin (ูุฏูุฑ)

- โ ุงููุตูู ุงููุงูู ุฅูู ููุญุฉ ุงูุชุญูู (`/admin/*`)
- โ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- โ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช
- โ ูุฑุงุฌุนุฉ ุงูุณุฌูุงุช (Audit Logs)
- โ ุฅุนุฏุงุฏุงุช ุงููุธุงู
- โ ุงููุณุฎ ุงูุงุญุชูุงุทู

### User (ูุณุชุฎุฏู)

- โ ุงููุตูู ุฅูู ุงูููุฒุงุช ุงูุฃุณุงุณูุฉ
- โ ูุง ูููู ุงููุตูู ุฅูู ููุญุฉ ุงูุฅุฏุงุฑุฉ
- โ ูุง ูููู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- โ ูููู ุนุฑุถ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ููุท

---

## ๐ธ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ูููุน ุงูุญูู

ุงูุญูู ููุฌูุฏ ูู ุตูุญุฉ ุงูุชุณุฌูู **ููู ุฒุฑ "ุฅูุดุงุก ุญุณุงุจ"** ูุจุงุดุฑุฉุ ุจูู:

- โฌ๏ธ ุญูู "ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ"
- โฌ๏ธ ุฒุฑ "ุฅูุดุงุก ุญุณุงุจ"

### ุงูุชุตููู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ููุน ุงูุญุณุงุจ *                        โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ ูุฏูุฑ - ุตูุงุญูุงุช ูุงููุฉ (Admin)    โ โ
โ โ ูุณุชุฎุฏู - ุตูุงุญูุงุช ูุญุฏูุฏุฉ (User)  โ โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ ุดุฑุญ ุงูุตูุงุญูุฉ ุงููุฎุชุงุฑุฉ...         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงูููุฒุฉ

### ุงูุณููุงุฑูู 1: ุชุณุฌูู ููุฏูุฑ

1. ุงูุชุญ: `http://localhost:3000/auth/register`
2. ุฃุฏุฎู ุงูุจูุงูุงุช ุงููุทููุจุฉ
3. ุงุฎุชุฑ "ูุฏูุฑ - ุตูุงุญูุงุช ูุงููุฉ"
4. ุงุถุบุท "ุฅูุดุงุก ุญุณุงุจ"
5. โ ูุฌุจ ุฃู ูุชู ุฅูุดุงุก ุญุณุงุจ ุจุตูุงุญูุงุช Admin

### ุงูุณููุงุฑูู 2: ุชุณุฌูู ููุณุชุฎุฏู

1. ุงูุชุญ: `http://localhost:3000/auth/register`
2. ุฃุฏุฎู ุงูุจูุงูุงุช ุงููุทููุจุฉ
3. ุงุฎุชุฑ "ูุณุชุฎุฏู - ุตูุงุญูุงุช ูุญุฏูุฏุฉ"
4. ุงุถุบุท "ุฅูุดุงุก ุญุณุงุจ"
5. โ ูุฌุจ ุฃู ูุชู ุฅูุดุงุก ุญุณุงุจ ุจุตูุงุญูุงุช User

### ุงูุณููุงุฑูู 3: ุนุฏู ุงูุงุฎุชูุงุฑ

1. ูุง ุชุฎุชุฑ ุฃู ุตูุงุญูุฉ
2. ุงุถุบุท "ุฅูุดุงุก ุญุณุงุจ"
3. โ ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ ุฎุทุฃ: "ูุฑุฌู ุงุฎุชูุงุฑ ุงูุตูุงุญูุฉ"

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

```
โ app/(app)/auth/register/page.tsx
โ features/admin/users/user.schema.ts
โ app/api/admin/users/route.ts
โ components/admin/CreateUserDialog.tsx (ุฌุฏูุฏ)
โ app/(app)/admin/users/page.tsx
```

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑูุฉ)

1. **ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุฃุฏูุงุฑ**:
   - IA_Lead (ูุงุฆุฏ ุงูุชุฏููู)
   - IA_Auditor (ูุฏูู)

2. **ุชุญุณูู ุงูุฃูุงู**:
   - ููุน ุงููุณุชุฎุฏููู ุงูุนุงุฏููู ูู ุงุฎุชูุงุฑ Admin
   - ุชูุนูู ููุงููุฉ ุงููุฏูุฑ ุนูู ุญุณุงุจุงุช Admin ุงูุฌุฏูุฏุฉ

3. **ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช**:
   - ุฅุฑุณุงู ุฅูููู ุชุฑุญูุจู ุญุณุจ ููุน ุงูุญุณุงุจ
   - ุฅุดุนุงุฑ ูููุฏูุฑ ุนูุฏ ุชุณุฌูู Admin ุฌุฏูุฏ

---

## โ ุงูุฎูุงุตุฉ

ุชู ุจูุฌุงุญ ุฅุถุงูุฉ ุญูู ุงุฎุชูุงุฑ ุงูุตูุงุญูุฉ ูู ุตูุญุฉ ุงูุชุณุฌูู ูุน:

- โ Dropdown ูุงุถุญ ูุณูู ุงูุงุณุชุฎุฏุงู
- โ ุฎูุงุฑูู: Admin (ุตูุงุญูุงุช ูุงููุฉ) ู User (ุตูุงุญูุงุช ูุญุฏูุฏุฉ)
- โ ุฑุณุงุฆู ุชูุถูุญูุฉ ุฏููุงููููุฉ
- โ ุงูุชุญูู ูู ุงูุตุญุฉ
- โ ุฏุนู ูุงูู ูู Backend
- โ ูููุน ุงูุญูู ููู ุฒุฑ "ุฅูุดุงุก ุญุณุงุจ" ูุจุงุดุฑุฉ

ุงูููุฒุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู! ๐
