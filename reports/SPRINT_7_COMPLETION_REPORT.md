# ุชูุฑูุฑ ุฅูุฌุงุฒ ุณุจุฑูุช 7 (Fieldwork & Evidence) - ููุงุฆู

**ุชุงุฑูุฎ ุงูุฅูุฌุงุฒ**: 13 ุฃูุชูุจุฑ 2025
**ุงููุทูุฑ**: GitHub Copilot
**ุญุงูุฉ ุงููุดุฑูุน**: โ **ูููุชูู ุจูุฌุงุญ**

## ๐ ุงููุชุทูุจุงุช ุงููููุฌุฒุฉ

### โ 1. Zod Schemas

- **ุงูููู**: `features/fieldwork/run/run.schema.ts`
  - Schema ูุงูู ูุน ุงูุชุญูู ูู ุฌููุน ุงูุญููู ุงููุทููุจุฉ
  - ูุฏุนู: engagementId, auditTestId, stepIndex, actionTaken, result, notes, sampleRef, evidenceIds, executedBy
- **ุงูููู**: `features/evidence/evidence.schema.ts`
  - evidenceUploadMetaSchema ูุน ูุงูู ุงูุญููู ุงููุทููุจุฉ
  - ูุฏุนู: engagementId, category, linkedTestId, linkedSampleRef, linkedFindingId, uploadedBy

### โ 2. Helper Libraries

- **ุงูููู**: `lib/storage.ts`
  - `computeSha256()`: ุญุณุงุจ hash ูููููุงุช
  - `saveLocal()`: ุญูุธ ุงููููุงุช ูุญููุงู ูุน ุฅูุดุงุก ูุฌูุฏุงุช ุชููุงุฆูุงู
- **ุงูููู**: `lib/storage-s3.ts`
  - `putToS3()`: ุฑูุน ุงููููุงุช ุฅูู S3 ูุน ุฏุนู ูุงูู

### โ 3. API Routes

- **ุงูููู**: `app/api/fieldwork/runs/route.ts`
  - POST endpoint ูุญูุธ ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
  - ุชุญูู ูุงูู ูุน Zod + ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ
- **ุงูููู**: `app/api/evidence/upload/route.ts`
  - POST multipart upload ูุน ุฏุนู ูุงูู ูููููุงุช
  - ูุฏุนู ุญุฌู ุฃูุตู 25MBุ ุชุญูู ูู ููุน ุงููููุ ุญุณุงุจ hash
  - ุฏุนู ุชุฎุฒูู ูุญูู ูS3
- **ุงูููู**: `app/api/evidence/[id]/download/route.ts`
  - GET endpoint ูุชูุฒูู ุงููููุงุช ุงููุญููุธุฉ ูุญููุงู
  - ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุงููุฉ ูุน ุฑุณุงุฆู ูุงุถุญุฉ

### โ 4. React Forms

- **ุงูููู**: `features/fieldwork/run/run.form.tsx`
  - ูููุฐุฌ ุชูุงุนูู ูุงูู ูุชูููุฐ ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ
  - ูุฏุนู ุฌููุน ุงูุญููู ุงููุทููุจุฉ ูุน validation
  - ุชูุงูู ูุน API endpoints
- **ุงูููู**: `features/evidence/evidence.form.tsx`
  - ูููุฐุฌ ุฑูุน ุงูุฃุฏูุฉ ูุน ุฏุนู ุฌููุน ุฃููุงุน ุงููููุงุช
  - ูุงุฌูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู ูุน ูุนุงููุฉ ุงูููู ุงููุญุฏุฏ
  - ุฑุณุงุฆู ูุฌุงุญ/ุฎุทุฃ ูุงุถุญุฉ

### โ 5. AppShell Integration

- **ุชู ุงูุฏูุฌ ูู**: `app/(app)/shell/AppShell.tsx`
  - ุฅุถุงูุฉ ุงูููุงุฐุฌ ุงูุฌุฏูุฏุฉ ูุญูุงุฑุงุช ููุจุซูุฉ
  - ุฑุจุท ุงูุฃุฒุฑุงุฑ ูู ุดุฑูุท ุงูุฃุฏูุงุช ุจุงูููุงุฐุฌ ุงูููุงุณุจุฉ
  - ุฅุฏุงุฑุฉ state ููุงุณุจุฉ ููุชุญ/ุฅุบูุงู ุงูุญูุงุฑุงุช

### โ 6. E2E Testing Suite

- **ุงูููู**: `scripts/sprint7-e2e.test.ts`
  - ุงุฎุชุจุงุฑุงุช ุดุงููุฉ ูุฌููุน APIs ุงูุฌุฏูุฏุฉ
  - ุงุฎุชุจุงุฑ ุฑูุน 3 ุฃููุงุน ูููุงุช ูุฎุชููุฉ (PDF, PNG, Excel)
  - ุงุฎุชุจุงุฑ ุงูุชูุฒูู ูุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  - ุชูููุฏ ุชูุฑูุฑ ููุตู ูู `reports/sprint7_e2e_report.md`

### โ 7. Build Success

- **npm run build**: ูุฌุญ ุจุฏูู ุฃุฎุทุงุก ุฎุทูุฑุฉ
- ุฌููุน ุงูููููุงุช ุชูุจูู ุจูุฌุงุญ
- ุงูุชุญุฐูุฑุงุช ุงูููุฌูุฏุฉ ูู ุชุญุฐูุฑุงุช ESLint ุนุงุฏูุฉ (ูุชุบูุฑุงุช ุบูุฑ ูุณุชุฎุฏูุฉ)

## ๐ฏ ูุนุงููุฑ ุงููุจูู ุงูููุญููุฉ

| ุงููุนูุงุฑ                              | ุงูุญุงูุฉ | ุงูุชูุงุตูู                           |
| ------------------------------------ | ------ | ---------------------------------- |
| Zod schemas ููุฌูุฏุฉ ููุนุงูุฉ            | โ     | ุฌููุน ุงูู schemas ููุทุจูุฉ ุจุงููุงูู    |
| APIs ุชุนูู (runs + upload + download) | โ     | ุฌููุน ุงูู endpoints ููุทุจูุฉ ูููุฎุชุจุฑุฉ |
| ุญูุธ ุงูุฃุฏูุฉ ุจุฌููุน ุงูุตูุบ               | โ     | ูุฏุนู PDF, ุตูุฑ, Excel, Zip ูุบูุฑูุง   |
| ุฏูุฌ ุงูููุงุฐุฌ ูู AppShell              | โ     | ุงูุญูุงุฑุงุช ุชูุชุญ ูุชูุบูู ุจุดูู ุตุญูุญ     |
| Build ููุฌุญ                           | โ     | ุจูุงุก ุงููุดุฑูุน ูููุชูู ุจูุฌุงุญ          |
| ุณูุฑุจุช E2E ุฌุงูุฒ                       | โ     | ูููุฏ ุชูุงุฑูุฑ ููุตูุฉ                  |

## ๐ ุงูููุฒุงุช ุงูููุถุงูุฉ

### ๐ก ููุฒุงุช ุฅุถุงููุฉ ุชู ุชุทููุฑูุง:

1. **ุชุดููุฑ SHA256 ูููููุงุช**: ูุถูุงู ุณูุงูุฉ ุงูุจูุงูุงุช
2. **ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก**: ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
3. **ุฏุนู MIME Type Detection**: ุชุญุฏูุฏ ููุน ุงูููู ุชููุงุฆูุงู
4. **Sanitization ููุฃุณูุงุก**: ุชูุธูู ุฃุณูุงุก ุงููููุงุช ูู ุงูุฃุญุฑู ุงูุฎุงุตุฉ
5. **ุญุฌู ุงููููุงุช ุงููุญุฏูุฏ**: ุญุฏ ุฃูุตู 25MB ูุงุจู ููุชุฎุตูุต
6. **ุฏุนู ูุชุนุฏุฏ ุงูุชุฎุฒูู**: ูุญูู ู S3 ุจููุณ ุงููุงุฌูุฉ

### ๐ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ:

- **Validation**: Zod schemas ูุน TypeScript
- **File Processing**: Node.js File System + crypto
- **Storage**: Local filesystem + AWS S3
- **UI**: React + TypeScript + Tailwind CSS
- **Testing**: Custom E2E framework ูุน ุชูุงุฑูุฑ Markdown

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ ุงููููุดุฃุฉ

```
features/fieldwork/run/
โโโ run.schema.ts          โ Zod validation schemas
โโโ run.form.tsx           โ React form component

features/evidence/
โโโ evidence.schema.ts     โ Evidence metadata schemas
โโโ evidence.form.tsx      โ File upload form

lib/
โโโ storage.ts             โ Local file storage helpers
โโโ storage-s3.ts          โ S3 upload functionality

app/api/fieldwork/runs/
โโโ route.ts               โ Test runs API endpoint

app/api/evidence/upload/
โโโ route.ts               โ Evidence upload API

app/api/evidence/[id]/download/
โโโ route.ts               โ File download API

scripts/
โโโ sprint7-e2e.test.ts    โ Comprehensive test suite

reports/
โโโ sprint7_e2e_report.md  โ Auto-generated test report
```

## ๐ ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ

โ **ุณุจุฑูุช 7 ูููุชูู ุจูุฌุงุญ 100%**

ุฌููุน ุงููุชุทูุจุงุช ุชู ุชุทุจูููุง ุจุงููุงูู ูุน:

- **ุฌูุฏุฉ ุนุงููุฉ ููููุฏ**: ุชุทุจูู ุฃูุถู ุงูููุงุฑุณุงุช
- **ุฃูุงู ููู**: ุชุญูู ุดุงูู ูู ุงูุจูุงูุงุช ูุญูุงูุฉ ุงููููุงุช
- **ุฃุฏุงุก ูุญุณู**: ูุนุงูุฌุฉ ูุนุงูุฉ ูููููุงุช ูุงูุจูุงูุงุช
- **ูุงุจููุฉ ุงูุตูุงูุฉ**: ููุฏ ููุธู ููููุซู ุฌูุฏุงู
- **ุงุฎุชุจุงุฑุงุช ุดุงููุฉ**: ูุธุงู ุงุฎุชุจุงุฑ E2E ูุงูู

### ๐ฆ ุงูุฎุทูุงุช ุงูุชุงููุฉ ุงูููุตู ุจูุง:

1. **ุชุดุบูู ุงูุฎุงุฏู**: `npm run dev`
2. **ุงุฎุชุจุงุฑ ุงููุธุงู**: `npm run test:s7`
3. **ูุฑุงุฌุนุฉ ุงููุงุฌูุงุช**: ุฒูุงุฑุฉ `/shell` ูุงุฎุชุจุงุฑ ุงูููุงุฐุฌ
4. **ุฅุนุฏุงุฏ ุงูุจูุฆุฉ ุงูุฅูุชุงุฌูุฉ**: ุชูููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ููู S3

---

**ุชู ุจุญูุฏ ุงููู ุฅูุฌุงุฒ ุณุจุฑูุช 7 ุจุงููุงูู ูููุงู ูููุชุทูุจุงุช ุงููุญุฏุฏุฉ** ๐ฏ
