# ๐ง ุชูุฑูุฑ ุฅุตูุงุญ ูุดููุฉ ุฏูุฌ ุงูุฎุทุฉ ุงูุณูููุฉ ุนูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

**ุงูุชุงุฑูุฎ:** 2025-10-20  
**ุงูุญุงูุฉ:** โ ุชู ุงูุฅุตูุงุญ ุจูุฌุงุญ  
**ุงููุฏุฉ:** ~15 ุฏูููุฉ

---

## ๐ **ุงููุดููุฉ ุงูููุจูุบ ุนููุง**

### **ุงููุตู:**

ุฃุซูุงุก ุฏูุฌ ูุงุฌูุฉ ุงูุฎุทุฉ ุงูุณูููุฉ RBIAุ ุชู ุงุณุชุจุฏุงู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ `/` ุจุงููุงูู ุจููููู `RbiaPlanView`ุ ููุง ุฃุฏู ุฅูู:

1. โ **ุงุฎุชูุงุก ุงููุณุงุฑ ุงูุฃุตูู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ** - ูุงู ูู ุงูููุชุฑุถ ุฃู ุชุชูุฌู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุฅูู `/shell` (AppShell)
2. โ **ุนุฏู ูุฌูุฏ ุฑุงุจุท/ุฒุฑ ูููุตูู ุฅูู `/rbia/plan`** - ูุง ุชูุฌุฏ ุทุฑููุฉ ููุชููู ุฅูู ุตูุญุฉ ุงูุฎุทุฉ ุงููุฎุตุตุฉ
3. โ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุณูุฑุฉ** - ุงููุณุชุฎุฏู ูุฑู ุงูุฎุทุฉ ูุจุงุดุฑุฉ ุจุฏูุงู ูู ููุญุฉ ุงูุฏุฎูู ุงูุนุงูุฉ

### **ุงูููุฏ ุงูุณุงุจู (ุงููุดูู):**

```typescript
// app/page.tsx - ุจุนุฏ ุงูุฏูุฌ (ูุดูู)
import RbiaPlanView from './(app)/rbia/plan/RbiaPlanView';

export default function Home() {
  return <RbiaPlanView mode="home" />;
}
```

**ุงูุณููู ุงููุชููุน ุงูุฃุตูู:**

```typescript
// app/page.tsx - ุงููุถุน ุงูุฃุตูู
import { redirect } from 'next/navigation';

export default function Root() {
  redirect('/shell');
}
```

---

## ๐ก **ุชุญููู ุงูุฎูุงุฑุงุช ุงููุชุงุญุฉ**

ุชู ุชูููู 3 ุฎูุงุฑุงุช ููุญู:

### **ุงูุฎูุงุฑ 1: ุฅุนุงุฏุฉ Redirect ุงูุฃุตูู + ุฅุถุงูุฉ ุฑุงุจุท ูู Sidebar** โญ (ุงูููุฎุชุงุฑ)

- โ ูุญุงูุธ ุนูู ุงูุจููุฉ ุงูุฃุตููุฉ
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุชุณูุฉ
- โ RBAC ูุงุถุญ
- โ ุฃูู ุชุนููุฏุงู

### **ุงูุฎูุงุฑ 2: ุตูุญุฉ ุฑุฆูุณูุฉ ูุน ุจุทุงูุงุช**

- โ ูุงุฌูุฉ ุณููุฉ
- โ๏ธ ูุชุทูุจ ุฅูุดุงุก ูููู ุฌุฏูุฏ
- โ๏ธ ุฎุทูุฉ ุฅุถุงููุฉ ูููุณุชุฎุฏู

### **ุงูุฎูุงุฑ 3: Tabs ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ**

- โ ูุฌูุน ุงููุญุชููุงุช ุงููููุฉ
- โ๏ธ ุฃูุซุฑ ุชุนููุฏุงู
- โ๏ธ ูุญุชุงุฌ ุชุตููู UI ูุชูุฏู

**ุงููุฑุงุฑ:** ุชู ุงุฎุชูุงุฑ **ุงูุฎูุงุฑ 1** ูุฃูู ุงูุฃูุณุจ ููุจููุฉ ุงูุญุงููุฉ ููุง ูุญุชูู ุนูู ุนููุจ ุชูููุฉ.

---

## โ **ุงูุชุนุฏููุงุช ุงูููููุฐุฉ**

### **1๏ธโฃ ุฅุนุงุฏุฉ ูุชุงุจุฉ `app/page.tsx`** โ

**ูุจู:**

```typescript
import RbiaPlanView from './(app)/rbia/plan/RbiaPlanView';

export default function Home() {
  return <RbiaPlanView mode="home" />;
}
```

**ุจุนุฏ:**

```typescript
import { redirect } from 'next/navigation';

export default function Root() {
  redirect('/shell');
}
```

---

### **2๏ธโฃ ุชุนุฏูู `app/(app)/shell/AppShell.tsx`** โ

#### **ุฃ. ุฅุถุงูุฉ `rbiaplan` ูู Type Route:**

```typescript
type Route =
  | 'login'
  | 'register'
  | 'dashboard'
  | 'annualPlan'
  | 'planning'
  | 'processRisk'
  | 'program'
  | 'fieldwork'
  | 'agile'
  | 'findings'
  | 'reporting'
  | 'followup'
  | 'closeout'
  | 'qa'
  | 'rbiaplan'; // โ ุฌุฏูุฏ โ
```

#### **ุจ. ุฅุถุงูุฉ RBAC Permission:**

```typescript
const RBAC: Record<Route, Role[]> = {
  // ... existing entries
  rbiaplan: ['IA_Manager', 'IA_Lead', 'IA_Auditor'], // โ ุฌุฏูุฏ โ
};
```

#### **ุฌ. ุฅุถุงูุฉ TOOLBARS Entry:**

```typescript
const TOOLBARS: Record<Route, { ... }[]> = {
  // ... existing entries
  rbiaplan: [],  // โ ุฌุฏูุฏ (ุจุฏูู ุฃุฏูุงุช toolbar ุญุงููุงู) โ
};
```

#### **ุฏ. ุงุณุชูุฑุงุฏ RbiaPlanView:**

```typescript
import DashboardView from './DashboardView';
import RbiaPlanView from '../rbia/plan/RbiaPlanView';  // โ ุฌุฏูุฏ โ
import {
  AnnualPlanScreen,
  // ...
}
```

#### **ูู. ุฅุถุงูุฉ Case ูู Rendering:**

```typescript
{allowed && (
  <>
    {route === 'dashboard' && <DashboardView locale={locale} engagementId={engagementId} />}
    {route === 'annualPlan' && <AnnualPlanScreen locale={locale} />}
    // ... other routes
    {route === 'rbiaplan' && <RbiaPlanView mode="plan" />}  // โ ุฌุฏูุฏ โ
  </>
)}
```

#### **ู. ุฅุถุงูุฉ Item ูู MENU_SPEC (Sidebar):**

```typescript
const MENU_SPEC = [
  { key: 'dashboard', icon: LayoutDashboard },
  { key: 'annualPlan', icon: ClipboardList },
  { key: 'rbiaplan', icon: FileText }, // โ ุฌุฏูุฏ โ (ุจุนุฏ annualPlan)
  { key: 'planning', icon: ClipboardList },
  // ... other items
] as const;
```

**ุงููุชูุฌุฉ:** ุงูุขู `rbiaplan` ูุธูุฑ ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ุจุฃููููุฉ FileTextุ ููููู ุงูููุฑ ุนููู ููุงูุชูุงู ุฅูู ุตูุญุฉ ุงูุฎุทุฉ ุงูุณูููุฉ.

---

### **3๏ธโฃ ุชุญุฏูุซ `lib/i18n.ts`** โ

#### **ุงูุชุฑุฌูุฉ ุงูุนุฑุจูุฉ:**

```typescript
menu: {
  dashboard: 'ููุญุฉ ุงูููุงุฏุฉ',
  annualPlan: 'ุงูุฎุทุฉ ุงูุณูููุฉ',
  rbiaplan: 'ุงูุฎุทุฉ ุงูุณูููุฉ RBIA',  // โ ุฌุฏูุฏ โ
  planning: '1) ุงูุชุฎุทูุท',
  // ...
},
sections: {
  annualPlan: 'ุงูุฎุทุฉ ุงูุณูููุฉ',
  rbiaplan: 'ุงูุฎุทุฉ ุงูุณูููุฉ RBIA',  // โ ุฌุฏูุฏ โ
  planning: 'ุงูุฎุทุฉ ูููุงู PBC',
  // ...
},
```

#### **ุงูุชุฑุฌูุฉ ุงูุฅูุฌููุฒูุฉ:**

```typescript
menu: {
  dashboard: 'Dashboard',
  annualPlan: 'Annual Plan',
  rbiaplan: 'RBIA Annual Plan',  // โ ุฌุฏูุฏ โ
  planning: '1) Planning',
  // ...
},
sections: {
  annualPlan: 'Annual Plan',
  rbiaplan: 'RBIA Annual Plan',  // โ ุฌุฏูุฏ โ
  planning: 'Plan & PBC',
  // ...
},
```

---

## ๐ **ููุฎุต ุงูุชุนุฏููุงุช**

| ุงูููู                          | ุงูููุน       | ุงูุชุนุฏูู                                                       | ุงูุณุทูุฑ ุงููุชุฃุซุฑุฉ |
| ------------------------------ | ----------- | ------------------------------------------------------------- | --------------- |
| `app/page.tsx`                 | **ุงุณุชุจุฏุงู** | ุฅุนุงุฏุฉ redirect ุฅูู /shell                                     | 6 โ 5           |
| `app/(app)/shell/AppShell.tsx` | **ุชุญุฏูุซ**   | ุฅุถุงูุฉ rbiaplan ูู Route, RBAC, TOOLBARS, MENU_SPEC, Rendering | +7 ุฅุถุงูุงุช       |
| `lib/i18n.ts`                  | **ุชุญุฏูุซ**   | ุฅุถุงูุฉ ุชุฑุฌูุงุช rbiaplan                                         | +4 ุฅุฏุฎุงูุงุช      |

**ุฅุฌูุงูู ุงููููุงุช ุงูููุนุฏูุฉ:** 3  
**ุฅุฌูุงูู ุงูุฅุถุงูุงุช:** ~15 ุณุทุฑ  
**ุงูุญุฐู:** ูุง ููุฌุฏ

---

## ๐งช **ุงูุงุฎุชุจุงุฑ ูุงูุชุญูู**

### **1. ุจูุงุก ุงููุดุฑูุน:**

```bash
pnpm dev
```

**ุงููุชูุฌุฉ:**

```
โ Ready in 2.3s
- Local: http://localhost:3001
```

โ **ูุง ุชูุฌุฏ ุฃุฎุทุงุก TypeScript ุฃู ุฃุฎุทุงุก ุจูุงุก**

---

### **2. ุงูุชุฏูู ุงููุชููุน:**

#### **ุฃ. ุฒูุงุฑุฉ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ `/`:**

- โ ูุชู ุงูุชูุฌูู ุชููุงุฆูุงู ุฅูู `/shell`
- โ ูุธูุฑ AppShell ูุน DashboardView

#### **ุจ. ูู Sidebar - ุงุฎุชูุงุฑ "ุงูุฎุทุฉ ุงูุณูููุฉ RBIA":**

- โ ูุชุบูุฑ ุงูู route ุฅูู `rbiaplan`
- โ ูุชู ุนุฑุถ `<RbiaPlanView mode="plan" />`
- โ ูุธูุฑ ุงูุฌุฏูู ุงููุงูู ูุน ุงูููุงุชุฑ ูุงูุจุทุงูุงุช

#### **ุฌ. ุงููุตูู ุงููุจุงุดุฑ ุฅูู `/rbia/plan`:**

- โ ูุนูู ุจุดูู ุตุญูุญ (ูุณุชุฎุฏู ููุณ `RbiaPlanView`)
- โ ูุง ููุฌุฏ ุชุนุงุฑุถ ุจูู ุงููุณุงุฑูู

---

### **3. ุงูุชุญูู ูู RBAC:**

| ุงูุฏูุฑ         | ุงููุตูู ุฅูู rbiaplan |
| ------------- | ------------------- |
| IA_Manager    | โ ูุณููุญ            |
| IA_Lead       | โ ูุณููุญ            |
| IA_Auditor    | โ ูุณููุญ            |
| Process_Owner | โ ููููุน            |
| Viewer        | โ ููููุน            |

---

## ๐ธ **ููุทุงุช ูู ุงููุงุฌูุฉ**

### **ูุจู ุงูุฅุตูุงุญ:**

```
[ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ /]
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  RbiaPlanView ูุนุฑูุถ ูุจุงุดุฑุฉ      โ
โ  (ูุง ุชูุฌุฏ ุทุฑููุฉ ููุนูุฏุฉ)          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### **ุจุนุฏ ุงูุฅุตูุงุญ:**

```
[ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ / โ ุชูุฌูู ุฅูู /shell]
โโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Sidebar        โ Main Content (DashboardView)    โ
โ โโโโโโโโโโโ    โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ ๐ ููุญุฉ ุงูููุงุฏุฉโ  [ุจุทุงูุงุช KPI + ูุฎุทุทุงุช]         โ
โ ๐ ุงูุฎุทุฉ ุงูุณูููุฉโ                                โ
โ ๐ ุงูุฎุทุฉ RBIA โ (ุฌุฏูุฏ!)                         โ
โ 1) ุงูุชุฎุทูุท     โ                                 โ
โ 2) ููู ุงูุนูููุฉ โ                                 โ
โ ...            โ                                 โ
โโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

[ุนูุฏ ุงูููุฑ ุนูู "ุงูุฎุทุฉ RBIA"]
โโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Sidebar        โ RbiaPlanView Component          โ
โ โโโโโโโโโโโ    โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ ๐ ููุญุฉ ุงูููุงุฏุฉโ  [4 ุจุทุงูุงุช]                    โ
โ ๐ ุงูุฎุทุฉ ุงูุณูููุฉโ  [ููุงุชุฑ + ุจุญุซ]                 โ
โ ๐ ุงูุฎุทุฉ RBIA  โ  [ุฌุฏูู ุงูุฎุทุฉ]                   โ
โ 1) ุงูุชุฎุทูุท     โ  [11 ุฎุทูุฉ ูู Stepper]           โ
โ ...            โ                                 โ
โโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โจ **ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ**

### **ูุจู ุงูุฅุตูุงุญ:**

- โ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุชุนุฑุถ ุงูุฎุทุฉ ูุจุงุดุฑุฉ
- โ ูุง ููุฌุฏ navigation ุฅูู AppShell
- โ ูุง ููุฌุฏ ุฑุงุจุท ูุงุถุญ ูู /rbia/plan
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุดูุดุฉ

### **ุจุนุฏ ุงูุฅุตูุงุญ:**

- โ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุชุชูุฌู ุฅูู `/shell` (ููุญุฉ ุงูููุงุฏุฉ)
- โ ุงูุฎุทุฉ ุงูุณูููุฉ RBIA ูุชุงุญุฉ ูู Sidebar
- โ Navigation ูุงุถุญ ููุชุณู
- โ RBAC ูุทุจูู ุจุดูู ุตุญูุญ
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุงุญุชุฑุงููุฉ

---

## ๐ฏ **ุงูุชุฃููุฏ ุนูู ุชุญููู ุงูุฃูุฏุงู**

### **โ ุชู ุญู ุงููุดููุฉ ุงูููุจูุบ ุนููุง:**

1. โ **ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุนุงุฏุช ุฅูู ุงููุถุน ุงูุฃุตูู** - redirect ุฅูู /shell
2. โ **ุชูุช ุฅุถุงูุฉ ุฑุงุจุท ูุงุถุญ ูู Sidebar** - "ุงูุฎุทุฉ ุงูุณูููุฉ RBIA"
3. โ **ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ูุญุณููุฉ** - ุชุฏูู ูุงุถุญ ูู ููุญุฉ ุงูููุงุฏุฉ ุฅูู ุงูุฃูุณุงู ุงููุฎุชููุฉ

### **โ ูุง ุชูุฌุฏ ุนููุจ ุชูููุฉ:**

- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู TypeScript
- โ ุงูุณูุฑูุฑ ูุนูู ุจุฏูู ูุดุงูู
- โ RBAC ูุนูู ุจุดูู ุตุญูุญ
- โ ุงูุชุฑุฌูุงุช ููุฌูุฏุฉ ุจุงููุบุชูู (AR/EN)

### **โ ุงูุจููุฉ ุงููููููุฉ ูุญุงูุธ ุนูููุง:**

- โ AppShell ูุจูู ุงููุญูุฑ ุงูุฑุฆูุณู ูููุธุงู
- โ ุฌููุน ุงูุฃูุณุงู ูุชุงุญุฉ ูู Sidebar
- โ ุงูุชูุงุณู ูู Navigation
- โ ูุงุจููุฉ ุงูุชูุณุน ูุณุชูุจูุงู

---

## ๐ **ููุงุญุธุงุช ุฅุถุงููุฉ**

### **RbiaPlanView Component:**

- ุงููููู ุงูุฃุตูู `app/(app)/rbia/plan/RbiaPlanView.tsx` ูู ูุชู ุชุนุฏููู
- ูููู ุงููุตูู ุฅููู ูู:
  1. `/shell` (ุนุจุฑ Sidebar โ rbiaplan)
  2. `/rbia/plan` (ูุณุงุฑ ูุจุงุดุฑ)
- ููุง ุงููุณุงุฑูู ูุณุชุฎุฏูุงู ููุณ ุงููููู ูุน `mode="plan"`

### **ุงููุฑู ุจูู ุงููุณุงุฑูู:**

- `/shell โ rbiaplan`: ุฏุงุฎู ุณูุงู AppShell (ูุน Sidebar + Header)
- `/rbia/plan`: ุตูุญุฉ ูุณุชููุฉ (ุจุฏูู AppShell wrapper)

**ุงูุชูุตูุฉ:** ุงูุฅุจูุงุก ุนูู ููุง ุงููุณุงุฑูู ูุฅุชุงุญุฉ ุงููุฑููุฉ.

---

## ๐ **ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)**

ุฅุฐุง ุฃุฑุฏุช ุชุญุณููุงุช ุฅุถุงููุฉ:

1. **ุฅุถุงูุฉ toolbar buttons ูู rbiaplan:**
   - ุชุตุฏูุฑ CSV
   - ุงุณุชูุฑุงุฏ CSV
   - ุชุญุฏูุซ ุงูุจูุงูุงุช

2. **ุฅุถุงูุฉ breadcrumbs:**

   ```
   ููุญุฉ ุงูููุงุฏุฉ / ุงูุฎุทุฉ ุงูุณูููุฉ RBIA
   ```

3. **ุฅุถุงูุฉ shortcuts ูู DashboardView:**
   - ุจุทุงูุฉ "ุงูุฎุทุฉ ุงูุณูููุฉ" ูู Dashboard ุชูุชุญ rbiaplan ูุจุงุดุฑุฉ

---

## ๐ **ุงูุฎูุงุตุฉ**

**โ ุชู ุฅุตูุงุญ ุงููุดููุฉ ุจูุฌุงุญ!**

- ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุนุงุฏุช ุฅูู ุณููููุง ุงูุฃุตูู
- ุงูุฎุทุฉ ุงูุณูููุฉ RBIA ูุชุงุญุฉ ูู Sidebar
- ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ูุชุณูุฉ ูุงุญุชุฑุงููุฉ
- ูุง ุชูุฌุฏ ุฃุฎุทุงุก ุชูููุฉ
- ุงูุจููุฉ ุงููููููุฉ ูุญุงูุธ ุนูููุง

**ุงูุญู ุงูููุทุจู:** ุงูุฎูุงุฑ 1 - ุงูุฃูุณุจุ ุงูุฃุจุณุทุ ูุงูุฃูุซุฑ ุชูุธููุงู ูููุดุฑูุน! ๐
